<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hedef AVM - Şanslı Kutu Oyunu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            /* Arka plan görseli ve ayarları */
            background-image: url('https://www.upload.ee/image/18878921/23e23ed2323.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Arka planı sabitler */
        }
        
        /* Maskot Etkileşimleri */
        .gift-mascot {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }
        .gift-mascot:hover {
            transform: scale(1.05) translateY(-10px);
            filter: drop-shadow(0 20px 20px rgba(236, 72, 153, 0.3));
        }
        
        /* Modal Animasyonu */
        .modal-content {
            animation: popIn 0.4s ease-out;
        }
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Konfeti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        /* Seçim Kartı Stilleri */
        .tier-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .tier-card:hover {
            transform: translateY(-5px);
        }
        .tier-card.selected {
            border-color: #db2777; /* pink-600 */
            background-color: #fdf2f8; /* pink-50 */
            box-shadow: 0 10px 25px -5px rgba(219, 39, 119, 0.5);
            transform: scale(1.05);
        }
        .tier-card.selected .check-icon {
            opacity: 1;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center text-gray-800 relative overflow-hidden">

    <!-- Konfeti Alanı -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Header / Logo Alanı -->
    <header class="w-full text-center pt-6 pb-2 z-10 absolute top-0 left-0">
        <h1 class="text-3xl md:text-5xl font-extrabold text-pink-600 drop-shadow-sm tracking-wide">HEDEF AVM</h1>
        <p class="text-pink-500 font-bold text-sm md:text-lg mt-1 tracking-widest">SÜRPRİZ HEDİYE OYUNU</p>
    </header>

    <!-- GİRİŞ / SEÇİM EKRANI -->
    <div id="entry-screen" class="w-full max-w-6xl px-4 z-20 flex flex-col items-center justify-center h-screen pt-20">
        
        <div class="text-center mb-8">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 bg-white/80 backdrop-blur-sm px-8 py-2 rounded-full inline-block shadow-sm">
                Alışveriş Tutarınızı Seçiniz
            </h2>
            <p class="text-gray-600 mt-2 font-medium bg-white/60 px-4 py-1 rounded-full inline-block">
                Hediye havuzu seçiminize göre belirlenecektir.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full mb-10">
            <!-- 15.000 TL Seçeneği -->
            <div onclick="selectTier('tier3')" id="card-tier3" class="tier-card bg-white/90 backdrop-blur-md rounded-3xl p-6 border-4 border-transparent shadow-xl flex flex-col items-center justify-center text-center relative h-64 md:h-80 group">
                <div class="check-icon opacity-0 absolute top-4 right-4 bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center transition-opacity">
                    <i class="fas fa-check"></i>
                </div>
                <div class="w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center mb-4 text-pink-500 text-3xl group-hover:scale-110 transition-transform">
                    <i class="fas fa-bag-shopping"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">15.000 TL</h3>
                <p class="text-sm text-gray-500 font-semibold uppercase tracking-wider">ve Üzeri</p>
            </div>

            <!-- 60.000 TL Seçeneği -->
            <div onclick="selectTier('tier2')" id="card-tier2" class="tier-card bg-white/90 backdrop-blur-md rounded-3xl p-6 border-4 border-transparent shadow-xl flex flex-col items-center justify-center text-center relative h-64 md:h-80 group">
                <div class="check-icon opacity-0 absolute top-4 right-4 bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center transition-opacity">
                    <i class="fas fa-check"></i>
                </div>
                <div class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mb-4 text-purple-500 text-3xl group-hover:scale-110 transition-transform">
                    <i class="fas fa-cart-shopping"></i>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">60.000 TL</h3>
                <p class="text-sm text-gray-500 font-semibold uppercase tracking-wider">ve Üzeri</p>
            </div>

            <!-- 100.000 TL Seçeneği -->
            <div onclick="selectTier('tier1')" id="card-tier1" class="tier-card bg-white/90 backdrop-blur-md rounded-3xl p-6 border-4 border-transparent shadow-xl flex flex-col items-center justify-center text-center relative h-64 md:h-80 group">
                <div class="check-icon opacity-0 absolute top-4 right-4 bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center transition-opacity">
                    <i class="fas fa-check"></i>
                </div>
                <div class="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mb-4 text-yellow-600 text-3xl group-hover:scale-110 transition-transform">
                    <i class="fas fa-crown"></i>
                </div>
                <h3 class="text-3xl font-extrabold text-gray-800 mb-2">100.000 TL</h3>
                <p class="text-sm text-gray-500 font-semibold uppercase tracking-wider">ve Üzeri</p>
            </div>
        </div>

        <button onclick="startGame()" id="start-btn" class="bg-gray-300 text-white font-bold py-4 px-12 rounded-full text-xl shadow-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
            OYUNA BAŞLA
        </button>

    </div>


    <!-- ANA OYUN ALANI (Başlangıçta Gizli) -->
    <main id="game-container" class="hidden flex-1 w-full max-w-7xl flex flex-col items-center justify-center px-4 z-10 pb-10 pt-20">
        
        <!-- Bilgilendirme Metni -->
        <div id="instruction-text" class="text-center mb-4 md:mb-8">
            <span class="inline-block bg-white/80 backdrop-blur-md px-8 py-3 rounded-full shadow-md text-lg md:text-2xl font-bold text-pink-600 border-2 border-pink-100">
                Hedefix ile hediyeni kap!
            </span>
        </div>

        <!-- Maskotlar Container -->
        <div id="game-area" class="grid grid-cols-3 gap-2 md:gap-8 w-full items-end justify-items-center h-auto">
            
            <!-- Seçim 1 -->
            <div class="gift-mascot group flex flex-col items-center w-full" onclick="startAnimation(1)">
                <span class="mb-2 md:mb-6 font-bold text-pink-600 bg-white px-4 py-1 md:px-6 md:py-2 rounded-full shadow-lg border border-pink-100 text-xs md:text-lg group-hover:bg-pink-600 group-hover:text-white transition-colors z-20">
                    1. Seçim
                </span>
                <div class="relative w-full h-48 md:h-[500px] flex items-end justify-center">
                    <img src="https://www.upload.ee/image/18878142/freepik__pink-female-mascot-with-large-glittering-eyes-pres__9764.jpeg" 
                         alt="Hediye Maskotu 1" 
                         class="h-full w-auto object-contain filter drop-shadow-2xl hover:brightness-105 transition-all duration-300 rounded-2xl">
                </div>
            </div>

            <!-- Seçim 2 -->
            <div class="gift-mascot group flex flex-col items-center w-full" onclick="startAnimation(2)">
                <span class="mb-2 md:mb-6 font-bold text-pink-600 bg-white px-4 py-1 md:px-6 md:py-2 rounded-full shadow-lg border border-pink-100 text-xs md:text-lg group-hover:bg-pink-600 group-hover:text-white transition-colors z-20">
                    2. Seçim
                </span>
                <div class="relative w-full h-48 md:h-[500px] flex items-end justify-center">
                    <img src="https://www.upload.ee/image/18878151/freepik__a-cute-pink-female-mascot-with-big-sparkling-eyes-__9768.jpeg" 
                         alt="Hediye Maskotu 2" 
                         class="h-full w-auto object-contain filter drop-shadow-2xl hover:brightness-105 transition-all duration-300 rounded-2xl">
                </div>
            </div>

            <!-- Seçim 3 -->
            <div class="gift-mascot group flex flex-col items-center w-full" onclick="startAnimation(3)">
                <span class="mb-2 md:mb-6 font-bold text-pink-600 bg-white px-4 py-1 md:px-6 md:py-2 rounded-full shadow-lg border border-pink-100 text-xs md:text-lg group-hover:bg-pink-600 group-hover:text-white transition-colors z-20">
                    3. Seçim
                </span>
                <div class="relative w-full h-48 md:h-[500px] flex items-end justify-center">
                    <img src="https://www.upload.ee/image/18878161/freepik__a-cute-pink-female-mascot-with-big-sparkling-eyes-__9770.jpeg" 
                         alt="Hediye Maskotu 3" 
                         class="h-full w-auto object-contain filter drop-shadow-2xl hover:brightness-105 transition-all duration-300 rounded-2xl">
                </div>
            </div>

        </div>

    </main>

    <!-- GIF Animasyon Ekranı -->
    <div id="gif-overlay" class="fixed inset-0 z-40 flex items-center justify-center bg-black/80 hidden flex-col">
        <!-- Buraya GIF gelecek -->
        <img id="animation-gif" src="" alt="Hediye Hazırlanıyor..." class="w-full max-w-md h-auto object-contain drop-shadow-2xl">
        <p class="text-white font-bold text-xl mt-4 animate-pulse">Hediye Hazırlanıyor...</p>
    </div>

    <!-- Sonuç Modalı -->
    <div id="result-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm hidden">
        <div class="modal-content bg-white rounded-[2rem] p-8 max-w-md w-[90%] text-center shadow-2xl relative border-8 border-pink-200">
            <!-- Süsleme -->
            <div class="absolute -top-12 left-1/2 transform -translate-x-1/2 w-24 h-24 bg-gradient-to-br from-pink-400 to-pink-600 rounded-full flex items-center justify-center border-4 border-white shadow-xl animate-bounce">
                <i class="fas fa-gift text-5xl text-white"></i>
            </div>

            <h2 class="text-3xl font-extrabold text-gray-800 mt-10 mb-2 tracking-tight">TEBRİKLER!</h2>
            <p class="text-pink-500 font-medium mb-6">Şanslı seçiminden kazandığın ürün:</p>
            
            <div class="bg-pink-50 p-6 rounded-2xl border-2 border-pink-100 mb-8 transform rotate-1 hover:rotate-0 transition-transform">
                <p id="won-prize-name" class="text-xl md:text-2xl font-black text-pink-600 uppercase break-words leading-tight">...</p>
            </div>
            
            <div class="border-t border-gray-100 pt-4">
                <p class="text-sm text-gray-400 mb-4 font-medium">Lütfen bu ekranı görevliye gösteriniz.</p>
                <button onclick="resetGame()" class="w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-pink-200 text-lg">
                    Yeni Oyun Başlat
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="w-full text-center py-4 text-xs font-semibold text-pink-400/70 absolute bottom-0 left-0">
        &copy; 2025 Hedef AVM
    </footer>

    <script>
        // --- SES EFEKTLERİ ---
        const clickSound = new Audio('https://cdn.pixabay.com/audio/2022/03/15/audio_c8c8a73467.mp3'); 
        const waitSound = new Audio('https://cdn.pixabay.com/audio/2022/03/10/audio_c635d968b5.mp3'); 
        const winSound = new Audio('https://cdn.pixabay.com/audio/2021/08/04/audio_0625c153e2.mp3'); 
        
        clickSound.volume = 0.5;
        waitSound.volume = 0.6;
        winSound.volume = 0.7;

        // --- AYARLAR KISMI ---
        const GIF_URL = "https://www.upload.ee/image/18878896/ezgif-6d0aafcd45792c21.gif";
        const GIF_DURATION = 3500;

        // --- HEDİYE HAVUZLARI (EXCEL VERİLERİNE GÖRE GÜNCELLENMİŞ) ---
        const prizePools = {
            // 100.000 TL ve Üzeri
            tier1: [
                { ad: "FAKİR PURE STEAM BUHARLI TEMİZLEYİCİ", sans: 14 },
                { ad: "ARNİCA ET11200 SÜPÜRGEÇ E-MAX ROSE ŞARJLI DİK SÜPÜRGE", sans: 14 },
                { ad: "KORKMAZ A981 JAVA SÜT KÖPÜRTÜCÜLÜ ESPRESSO KAHVE MAK.", sans: 10 },
                { ad: "PHILIPS BXA0014/00 (AIRFRYER & KAHVE MAK. HEDİYE)", sans: 8 },
                { ad: "SCHAFER THERMOCHEF AIRFRYER/SICAK HAVA FRİTÖZÜ-ANTRASİT", sans: 8 },
                { ad: "PROFİLO PSP5UHD TOZ TORBASIZ SÜPÜRGE", sans: 13 },
                { ad: "PROFİLO PSP5U200 TOZ TORBASIZ SÜPÜRGE", sans: 13 },
                { ad: "TECHNO PC ULTRAPAD UP10.SI36LA 10.1\" 64GB TABLET", sans: 10 },
                { ad: "ONVO 32\" UYDULU LED TV", sans: 10 }
            ],
            // 60.000 TL - 99.999 TL
            tier2: [
                { ad: "SCHAFER OPTİMAL ELEKTRİKLİ ÇAY MAKİNESİ -INOX", sans: 4 },
                { ad: "SCHAFER PLACER ELEKTRİKLİ CEZVE-SİYAH", sans: 4 },
                { ad: "RUSSELL HOBBS FRY AIR&LARGE 5 LT", sans: 10 },
                { ad: "FAKİR KAAVE PLUS TÜRK KAHVE MAK.-COPPER", sans: 4 },
                { ad: "SCHAFER KEYF-İ KAHVE ÇİFT TUŞLU TÜRK KAHVE MAK.", sans: 4 },
                { ad: "FAKİR MERCY BUHARLI ÜTÜ MAVİ", sans: 4 },
                { ad: "SCHAFER GLATT ECO BUHARLI ÜTÜ-MOR", sans: 4 },
                { ad: "KORKMAZ A319-03 MİA WAFFLE MAK.ROSAGOLD", sans: 4 },
                { ad: "HİKİNG WH9 SMARTWATCH AKILLI SAAT", sans: 4 },
                { ad: "HALL DREAM 150*230 HALI", sans: 4 },
                { ad: "LATEKS KAMPANYALI 160*230 HALI", sans: 6 },
                { ad: "KOZA ZENİTH 160*230 HALI", sans: 7 },
                { ad: "KOZA MOONLIGHT 160*230 HALI-SK", sans: 7 },
                { ad: "KOZA HELSİNKİ 160*230 HALI", sans: 7 },
                { ad: "KOZA LYON 160*230 HALI", sans: 6 },
                { ad: "KOZA NORWAY 160*230 HALI", sans: 6 },
                { ad: "TAÇ 4686 EMBOS Ç.K BATTANİYE", sans: 2 },
                { ad: "İRİNA EKOSE PAMUKLU Ç.K BATTANİYE", sans: 2 },
                { ad: "COTTONBOX EMBOS Ç.K BATTANİYE", sans: 2 },
                { ad: "AKSU VİZON Ç.K BATTANİYE", sans: 2 },
                { ad: "HALİME SULTAN FİTİLLİ Ç.K YORGAN SETİ 195*215", sans: 2 },
                { ad: "HALİME SULTAN SHERPA Ç.K YORGAN SETİ 195*215", sans: 2 },
                { ad: "HOMELAND NAKIŞLI Ç.K YATAK ÖRTÜSÜ", sans: 2 }
            ],
            // 15.000 TL - 59.999 TL
            tier3: [
                { ad: "PLATOON PL-2036 (P47M) KEDİLİ BLUETOOTH KULAKLIK", sans: 3 },
                { ad: "PLATOON PL-2343 SD BLUETOOTH KULAKLIK", sans: 3 },
                { ad: "DEXİM GC 31 10000mAh POWERBANK", sans: 3 },
                { ad: "RAİN KAMPANYALI 80*150 HALI", sans: 15 },
                { ad: "LATEKS KAMPANYALI 80*150 HALI", sans: 8 },
                { ad: "CEWİ PUNCH KIRLENT", sans: 8 },
                { ad: "İRİNA OLİVİA 4'LÜ HAVLU 50*90", sans: 3 },
                { ad: "HALİME SULTAN PETEK Ç.K YORGAN 195*215", sans: 3 },
                { ad: "HALİME SULTAN PETEK ULTRA Ç.K YORGAN 195*215", sans: 3 },
                { ad: "UVİ LASTİKLİ ÇARŞAF YASTIKLI (100X200)", sans: 3 },
                { ad: "UVİ LASTİKLİ ÇARŞAF YASTIKLI (120X200)", sans: 3 },
                { ad: "UVİ LASTİKLİ ÇARŞAF YASTIKLI (160X200)", sans: 3 },
                { ad: "ÇAĞLI Ç.K NEVRESİM TAKIMI", sans: 10 },
                { ad: "DOĞAN Ç.K NEVRESİM TAKIMI", sans: 10 },
                { ad: "İRİNA T.K NEVRESİM TKM", sans: 2 },
                { ad: "HALİME SULTAN KLİMALI TEK BİYELİ KAMPANYALI 50*70 YASTIK", sans: 10 },
                { ad: "HALİME SULTAN KAMPANYALI 200*225 ÇOK AMAÇLI YATAK ÖRTÜSÜ", sans: 10 }
            ]
        };

        let currentPool = []; // Seçilen havuz buraya yüklenecek
        let isProcessing = false;
        let selectedTier = null;

        // --- GİRİŞ EKRANI FONKSİYONLARI ---

        function selectTier(tier) {
            // Önceki seçimleri temizle
            document.querySelectorAll('.tier-card').forEach(card => card.classList.remove('selected'));
            
            // Yeni seçimi işaretle
            const selectedCard = document.getElementById('card-' + tier);
            selectedCard.classList.add('selected');
            
            // Değişkeni güncelle ve butonu aktif et
            selectedTier = tier;
            const startBtn = document.getElementById('start-btn');
            startBtn.disabled = false;
            startBtn.classList.remove('bg-gray-300', 'cursor-not-allowed');
            startBtn.classList.add('bg-pink-600', 'hover:bg-pink-700', 'text-white');
            
            // Ses efekti
            clickSound.currentTime = 0;
            clickSound.play().catch(e => console.warn(e));
        }

        function startGame() {
            if (!selectedTier) return;

            // Havuzu ayarla
            currentPool = prizePools[selectedTier];

            // Ekranları değiştir
            document.getElementById('entry-screen').classList.add('hidden');
            document.getElementById('game-container').classList.remove('hidden');
            document.getElementById('game-container').classList.add('flex'); // Flex özelliğini geri ver

            // Ses efekti
            clickSound.currentTime = 0;
            clickSound.play().catch(e => console.warn(e));
        }


        // --- OYUN MANTIĞI ---

        function getRandomPrize() {
            let totalWeight = 0;
            currentPool.forEach(prize => totalWeight += prize.sans);

            let random = Math.floor(Math.random() * totalWeight);
            
            for (let i = 0; i < currentPool.length; i++) {
                random -= currentPool[i].sans;
                if (random < 0) {
                    return currentPool[i].ad;
                }
            }
            return currentPool[currentPool.length - 1].ad;
        }

        function startAnimation(boxNumber) {
            if (isProcessing) return;
            isProcessing = true;

            clickSound.currentTime = 0;
            clickSound.play().catch(e => console.warn("Ses hatası:", e));

            waitSound.currentTime = 0;
            waitSound.loop = true;
            waitSound.play().catch(e => console.warn("Ses hatası:", e));

            const gifOverlay = document.getElementById('gif-overlay');
            const gifImage = document.getElementById('animation-gif');
            
            gifImage.src = ""; 
            gifImage.src = GIF_URL;
            
            gifOverlay.classList.remove('hidden');

            setTimeout(() => {
                const prize = getRandomPrize();
                gifOverlay.classList.add('hidden');
                showResult(prize);
                startConfetti();
                waitSound.pause();
            }, GIF_DURATION);
        }

        function showResult(prizeName) {
            winSound.currentTime = 0;
            winSound.play().catch(e => console.warn("Ses hatası:", e));

            document.getElementById('won-prize-name').innerText = prizeName;
            document.getElementById('result-modal').classList.remove('hidden');
        }

        function resetGame() {
            waitSound.pause();
            waitSound.currentTime = 0;
            
            // Modalı kapat ve konfetiyi durdur
            document.getElementById('result-modal').classList.add('hidden');
            stopConfetti();
            
            // Giriş ekranına dön
            document.getElementById('game-container').classList.add('hidden');
            document.getElementById('game-container').classList.remove('flex');
            document.getElementById('entry-screen').classList.remove('hidden');
            
            // Seçimleri sıfırla
            selectedTier = null;
            document.querySelectorAll('.tier-card').forEach(card => card.classList.remove('selected'));
            const startBtn = document.getElementById('start-btn');
            startBtn.disabled = true;
            startBtn.classList.add('bg-gray-300', 'cursor-not-allowed');
            startBtn.classList.remove('bg-pink-600', 'hover:bg-pink-700', 'text-white');

            isProcessing = false;
        }

        // --- KONFETİ EFEKTİ ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let confettiAnimation;
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function createParticle() {
            const colors = ['#ec4899', '#f472b6', '#fbcfe8', '#fbbf24', '#60a5fa'];
            return {
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 8 + 4,
                speedY: Math.random() * 3 + 2,
                speedX: Math.random() * 2 - 1,
                angle: Math.random() * 360
            };
        }

        function drawConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, index) => {
                p.y += p.speedY;
                p.x += Math.sin(p.angle) * 2;
                p.angle += 0.1;
                
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                if (p.y > canvas.height) {
                    particles[index] = createParticle();
                    particles[index].y = -10;
                }
            });
            confettiAnimation = requestAnimationFrame(drawConfetti);
        }

        function startConfetti() {
            particles = Array(150).fill().map(createParticle);
            drawConfetti();
        }

        function stopConfetti() {
            cancelAnimationFrame(confettiAnimation);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

    </script>
</body>
</html>
